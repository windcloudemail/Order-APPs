<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¶…é™½æ˜¥é£²æ–™é»é¤ç³»çµ±</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; padding-top: 20px; }
        .container { max-width: 600px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .order-card { border-bottom: 1px solid #eee; padding: 10px 0; }
        /* .btn-main { background-color: #0d6efd; color: white; width: 100%; padding: 10px; font-size: 1.2rem; } */
        .btn-main { 
            background-color: #0d6efd; /* åŸæœ¬çš„è—è‰² */
            color: white; 
            width: 100%; 
            padding: 10px; 
            font-size: 1.2rem;
            border: none; /* å»ºè­°åŠ ä¸Šé€™è¡Œï¼Œå»æ‰é è¨­é‚Šæ¡† */
            transition: background-color 0.3s; /* åŠ å€‹è½‰å ´å‹•ç•«æœƒæ¯”è¼ƒé † */
        }
        
        /* â–¼ æ–°å¢é€™ä¸€æ®µï¼šæ»‘é¼ æ»‘éè®Šç¶ è‰² â–¼ */
        .btn-main:hover {
            background-color: #198754; /* é€™è£¡æ”¹æˆä½ å–œæ­¡çš„ç¶ è‰² (é€™æ˜¯ Bootstrap çš„æˆåŠŸç¶ ) */
            color: white; /* ç¢ºä¿æ–‡å­—é‚„æ˜¯ç™½è‰² */
        }
    </style>
</head>
<body>

<div class="container">
    <h2 class="text-center mb-4">ğŸ¥¤ è¶…é™½æ˜¥é£²æ–™é»é¤ç³»çµ±</h2>
    
    <div class="mb-3">
        <label class="form-label">ä½ çš„åå­—</label>
        <input type="text" id="userName" class="form-control" placeholder="ä¾‹å¦‚ï¼šé™³å°æ˜">
    </div>

    <div class="mb-3">
        <label class="form-label">é¸æ“‡é£²æ–™</label>
        <select id="drinkSelect" class="form-select">
            <option value="éŒ«è˜­ç´…èŒ¶">éŒ«è˜­ç´…èŒ¶</option>
            <option value="èŒ‰è‰ç¶ èŒ¶">èŒ‰è‰ç¶ èŒ¶</option>
            <option value="çç å¥¶èŒ¶">çç å¥¶èŒ¶</option>
            <option value="å››å­£æ˜¥èŒ¶">å››å­£æ˜¥èŒ¶</option>
        </select>
    </div>

    <div class="row mb-3">
        <div class="col">
            <label class="form-label">ç”œåº¦</label>
            <select id="sugarSelect" class="form-select">
                <option value="æ­£å¸¸ç³–">æ­£å¸¸ç³–</option>
                <option value="åŠç³–">åŠç³–</option>
                <option value="å¾®ç³–">å¾®ç³–</option>
                <option value="ç„¡ç³–">ç„¡ç³–</option>
            </select>
        </div>
        <div class="col">
            <label class="form-label">å†°å¡Š</label>
            <select id="iceSelect" class="form-select">
                <option value="æ­£å¸¸å†°">æ­£å¸¸å†°</option>
                <option value="å°‘å†°">å°‘å†°</option>
                <option value="å¾®å†°">å¾®å†°</option>
                <option value="å»å†°">å»å†°</option>
            </select>
        </div>
    </div>

    <button onclick="submitOrder()" class="btn btn-main rounded-pill">é€å‡ºè¨‚å–®</button>
    <hr class="my-4">
    <h4>ğŸ“‹ ç›®å‰è¨‚å–®åˆ—è¡¨</h4>
    <div id="orderList"><p class="text-muted">è¼‰å…¥ä¸­...</p></div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<script>
    // ==========================================
    // â–¼ è«‹åœ¨é€™è£¡å¡«å…¥ä½ çš„ Firebase Config â–¼
    // (å°±æ˜¯ä½ å¾å°ˆæ¡ˆè¨­å®šè¤‡è£½çš„é‚£ä¸€å¤§ä¸²ï¼Œä¿ç•™å¤§æ‹¬è™Ÿ)
    // ==========================================
  const firebaseConfig = {
  apiKey: "AIzaSyBVKIwa0GOQAdbOBjec3qRpoTouoybb-EA",
  authDomain: "order-app-7fc8d.firebaseapp.com",
  projectId: "order-app-7fc8d",
  storageBucket: "order-app-7fc8d.firebasestorage.app",
  messagingSenderId: "1048272085989",
  appId: "1:1048272085989:web:449d2de7a877436541050c"
};

    // ==========================================

    // åˆå§‹åŒ– (æ³¨æ„é€™è£¡æ˜¯ç”¨ firebase.initializeAppï¼Œé€™æ˜¯æ­£ç¢ºçš„å¯«æ³•)
    try {
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        console.log("Firebase é€£ç·šæˆåŠŸï¼");

        // é€å‡ºè¨‚å–®
        function submitOrder() {
            const name = document.getElementById('userName').value;
            const drink = document.getElementById('drinkSelect').value;
            const sugar = document.getElementById('sugarSelect').value;
            const ice = document.getElementById('iceSelect').value;

            if (!name) { alert("è«‹è¼¸å…¥åå­—ï¼"); return; }

            db.collection("orders").add({
                name: name,
                item: drink,
                detail: `${sugar} / ${ice}`,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            }).then(() => {
                alert("é»é¤æˆåŠŸï¼");
                document.getElementById('userName').value = ''; 
            }).catch((error) => {
                console.error("å¯«å…¥éŒ¯èª¤:", error);
                alert("é»é¤å¤±æ•—ï¼š" + error.message);
            });
        }

        // ç›£è½è¨‚å–®
        db.collection("orders").orderBy("timestamp", "desc").onSnapshot((snapshot) => {
            const listDiv = document.getElementById('orderList');
            listDiv.innerHTML = ""; 
            if(snapshot.empty) {
                listDiv.innerHTML = "<p>ç›®å‰é‚„æ²’æœ‰äººé»é¤ã€‚</p>";
                return;
            }
            snapshot.forEach((doc) => {
                const data = doc.data();
                // è™•ç†æ™‚é–“æˆ³è¨˜å¯èƒ½ç‚º null çš„æƒ…æ³ (å‰›å¯«å…¥æ™‚)
                let timeStr = "å‰›å‰›";
                if (data.timestamp) {
                    timeStr = new Date(data.timestamp.toDate()).toLocaleTimeString();
                }
                
                listDiv.innerHTML += `
                    <div class="order-card">
                        <strong>${data.name}</strong> é»äº† <span class="text-primary">${data.item}</span>
                        <br><small class="text-muted">${data.detail} (${timeStr})</small>
                    </div>
                `;
            });
        });

    } catch (e) {
        console.error("åˆå§‹åŒ–å¤±æ•—:", e);
        alert("ç¨‹å¼è¨­å®šæœ‰èª¤ï¼Œè«‹æŒ‰ F12 çœ‹ Console éŒ¯èª¤è¨Šæ¯");
    }
</script>

</body>

</html>


